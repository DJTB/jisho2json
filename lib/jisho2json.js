!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.jisho2json=n():e.jisho2json=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=5)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default="\n   /* highlight clickable entries on hover */\n  .concept_light {\n    transition: all .5s ease-in\n  }\n  .concept_light:hover {\n    transition: all .3s ease-out;\n    box-shadow: 0 0 4px 0 cornflowerblue;\n    cursor: pointer;\n  }\n  /* notification we will add to body */\n  .toast {\n    position: fixed;\n    top: .5rem;\n    right: .5rem;\n    bottom: .5rem;\n    left: .5rem;\n    padding: .5rem;\n    max-width: calc(100vw - 1rem);\n    max-height: calc(100vh - 1rem);\n    overflow: auto;\n    font-size: 1.2rem;\n    opacity: 0;\n    margin: 0 .3rem;\n    border: 4px solid gainsboro;\n    border-radius: 5px;\n    background-color: cornflowerblue;\n    color: whitesmoke;\n    cursor: pointer;\n    z-index: 100; /* jisho overlay is at 95 already */\n    /* <pre> formatting */\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    transition: opacity .35s ease-in;\n    /* disable clicks */\n    pointer-events: none;\n  }\n  .toast.--isVisible {\n    transition: opacity .25s ease-out;\n    pointer-events: initial;\n    opacity: .95;\n  }\n"},function(e,n,t){"use strict";function r(e,n){"loading"!==e.readyState?n():e.addEventListener("DOMContentLoaded",n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},function(e,n,t){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||document).querySelector(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.from((n||document).querySelectorAll(e))}Object.defineProperty(n,"__esModule",{value:!0}),n.domQs=r,n.domQsa=o},function(e,n,t){"use strict";function r(e,n,t){var o=1===e.nodeType,i=e===t,a=!e.parentNode;return o&&e.matches(n)?e:!i&&!a&&!!e.parentNode&&r(e.parentNode,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},function(e,n,t){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.reduce(function(e,n){var t=n.regex,r=n.replacement;return e.replace(t,r)},e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var o={regex:/'''/g,replacement:"‴"},i={regex:/(\W|^)"(\S)/g,replacement:"$1“$2"},a={regex:/(\u201c[^"]*)"([^"]*$|[^\u201c"]*\u201c)/g,replacement:"$1”$2"},u={regex:/([^0-9])"/g,replacement:"$1”"},c={regex:/''/g,replacement:"″"},s={regex:/(\W|^)'(\S)/g,replacement:"$1‘$2"},l={regex:/([a-z])'([a-z])/gi,replacement:"$1’$2"},d={regex:/((\u2018[^']*)|[a-z])'([^0-9]|$)/gi,replacement:"$1’$3"},f={regex:/(\u2018)([0-9]{2}[^\u2019]*)(\u2018([^0-9]|$)|$|\u2019[a-z])/gi,replacement:"’$2$3"},p={regex:/(\B|^)\u2018(?=([^\u2019]*\u2019\b)*([^\u2019\u2018]*\W[\u2019\u2018]\b|[^\u2019\u2018]*$))/gi,replacement:"$1’"},m={regex:/'/g,replacement:"′"},g=[o,i,a,u,c,s,l,d,f,p,m]},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){console.info("jisho2json loaded");var e=void 0,n=void 0;i(x.default),a().then(function(n){e=n,e.addEventListener("click",function(){return e.classList.remove("--isVisible")})}).catch(console.error),(0,_.domQs)("body").addEventListener("click",function(t){var r=t.target,o=document.getElementById("primary"),i=(0,O.default)(r,".concept_light",o);if(i){var a=JSON.stringify(u(i),null,2);chrome.extension.sendMessage({text:a}),console.info("Copied:\n",a),e.textContent=a,e.classList.add("--isVisible"),clearTimeout(n),n=setTimeout(function(){return e.classList.remove("--isVisible")},5e3)}})}function i(e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e)),document.head.appendChild(n)}function a(){return new Promise(function(e,n){var t=document.createElement("pre");Object.assign(t,{className:"toast",textContent:"jisho2json loaded"}),document.body.appendChild(t);var r=(0,_.domQs)(".toast");return r?e(r):n(new Error("Toast element not added to body"))})}function u(e){return[{meanings:p(e),readings:c(e)}]}function c(e){var n=f(e);return[{character:n,kana:d(e)||n,level:"7",tags:["Noun"],sentence:g(e),jlpt:l(e),common:s(e)}]}function s(e){return!!e.querySelector(".concept_light-common").length}function l(e){return(0,_.domQsa)(".concept_light-tag",e).filter(function(e){return e.innerText.includes("JLPT")}).map(function(e){return e.innerText})||null}function d(e){var n=(0,_.domQs)(".f-dropdown li:nth-of-type(2)",e),t=h(n).match(/(?!\b)\W+$/)||[];return y(t,1)[0]}function f(e){return h((0,_.domQs)(".text",e))}function p(e){var n=[];return(0,_.domQsa)(".meaning-wrapper",e).filter(function(e){return e.innerText.includes("Wikipedia")}).forEach(function(e){var t=m(e),r=(0,_.domQs)(".meaning-definition-section_divider + span",e),o=h(r).split("; ");o.length&&n.push({meanings:o,notes:v(e),tags:t,sentence:g(e)})}),n}function m(e){var n=(0,_.domQs)(".meaning-tags",e.previousElementSibling()),t=h(n);return""===n?[]:t.split(", ")}function g(e){var n=Array.from((0,_.domQs)("",e).children);return{ja:n.filter(function(e){return!e.classList.contains("english")}),en:n.filter(function(e){return e.classList.contains("english")})}}function v(e){return(0,_.domQsa)(".supplemental_info .tag-tag",e).map(h)}function h(e){return(0,T.default)(e.innerText.trim())}var y=function(){function e(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=t(0),x=r(b),j=t(1),w=r(j),_=t(2),$=t(3),O=r($),Q=t(4),T=r(Q);(0,w.default)(o)}])});