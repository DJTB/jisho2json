{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 077d6c88b309ee5bf45d","webpack:///./src/constants.js","webpack:///./src/styles.js","webpack:///./src/util/domHelpers.js","webpack:///./src/util/hasLength.js","webpack:///./src/util/renderToast.js","webpack:///./src/util/smartQuotes.js","webpack:///./src/index.js"],"names":["classnames","TOAST","ENTRY","VISIBLE","keycodes","ESC","primaryColorRGB","primaryColor","jishoStyle","toastStyle","ready","qs","qsa","writeStyle","findParent","findSibling","callback","dom","page","document","readyState","addEventListener","selector","container","querySelector","Array","from","querySelectorAll","style","element","createElement","setAttribute","appendChild","createTextNode","head","el","limit","isElementNode","nodeType","limitReached","matches","parentNode","previousSibling","hasNodeType","node","Number","isInteger","isNode","isTextNode","hasLength","x","Object","hasOwnProperty","call","length","renderToast","pre","assign","className","textContent","body","pendingFade","update","html","innerText","show","classList","toggle","clearTimeout","hide","delay","setTimeout","smartQuotes","TRIPLE_PRIME","regex","replacement","START_DOUBLE","END_DOUBLE","FINAL_DOUBLE","DOUBLE_PRIME","START_SINGLE","POSSESSIVE_SINGLE","END_SINGLE","YEAR_ABBREVIATION","BACKWARDS_APOSTROPHE","SINGLE_PRIME","PROCESSING_ORDER","input","reduce","output","replace","selectors","ENTRIES","MEANINGS","TAGS","MEANING","MEANING_COUNTER","MEANING_TEXT","MEANING_NOTE","MEANING_SENTENCE","SENTENCE_EN","SENTENCE_JA_MORPHEMES","READING_CHARACTER","READING_KANA","WORD_TAGS","ifKeyDo","key","keyCode","init","toaster","console","info","onEntryClick","target","jishoEntry","result","buildEntries","chrome","extension","sendMessage","text","entries","map","buildEntry","filter","entry","otherForms","tag","includes","shift","otherFormsText","nextSibling","synonyms","parseSynonyms","log","JSON","stringify","counterNode","tagsNode","definitionNode","noteNodes","counter","parseInt","getCleanText","isMainDefinition","tags","split","notes","parseNotes","meaning","reading","buildReading","elements","character","kana","sentenceEn","sentenceJa","join","parseKana","jlpt","getWordTag","common","re","match","kanaText","word","units","trim"],"mappings":"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","file":"jisho2json.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jisho2json\"] = factory();\n\telse\n\t\troot[\"jisho2json\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 077d6c88b309ee5bf45d","export const classnames = {\n  TOAST: 'toast',\n  ENTRY: 'concept_light',\n  VISIBLE: 'is--visible',\n};\n\nexport const keycodes = {\n  ESC: 27,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import { classnames } from './constants';\n\nconst primaryColorRGB = '100, 150, 240';\nconst primaryColor = `rgb(${primaryColorRGB})`;\n\n/**\n * css styles to be injected into head of jisho document\n * @type {String} css rules\n */\nexport const jishoStyle = `\n   /* highlight clickable entries on hover */\n  .${classnames.ENTRY} {\n    transition: all .5s ease-in\n  }\n  .${classnames.ENTRY}:hover {\n    transition: all .3s ease-out;\n    box-shadow: 0 0 4px 0 ${primaryColor};\n    cursor: pointer;\n  }\n`;\n\n\nexport const toastStyle = `\n  /* notification we will add to body */\n  .${classnames.TOAST} {\n    position: fixed;\n    font-size: 18px;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: 0;\n    padding: .25em;\n    max-width: calc(100vw);\n    max-height: calc(50vh);\n    overflow: auto;\n    opacity: 0;\n    background-color: whitesmoke;\n    border: 4px solid rgba(${primaryColorRGB}, .6);\n    border-top-color: rgba(${primaryColorRGB}, .8);\n    color: #444;\n    cursor: pointer;\n    z-index: 100; /* jisho overlay is at 95 already */\n    /* <pre> formatting */\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    transition: opacity .35s ease-in;\n    /* disable clicks */\n    pointer-events: none;\n  }\n  .${classnames.TOAST}.${classnames.VISIBLE} {\n    transition: opacity .25s ease-out;\n    pointer-events: initial;\n    opacity: .95;\n  }\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/styles.js","/**\n * Fires callback when document object is ready\n * @param  {Function} callback whatchawannado\n * @param  {HTMLDocument} [dom] optional virtual document (jsdom etc)\n */\nexport function ready(callback, dom) {\n  const page = dom || document;\n  if (page.readyState !== 'loading') {\n    callback();\n  } else {\n    page.addEventListener('DOMContentLoaded', callback);\n  }\n}\n\n/**\n * Returns first element that matches CSS selector {selector}.\n * Querying can optionally be restricted to {container}’s descendants\n * @param {String} selector jQuery-like selector '#idNode' || '.classNode'\n * @param {HTMLElement} [container] html element to search inside\n * @returns {HTMLElement} DOM node\n */\nexport function qs(selector = '', container = null) {\n  return (container || document).querySelector(selector);\n}\n\n/**\n * Returns all elements that match CSS selector {selector} as an Array.\n * Querying can optionally be restricted to {container}’s descendants\n * @param {String} selector jQuery-like selector: '#idNode' || '.classNode'\n * @param {HTMLElement} [container] html element to search inside\n * @returns {Array} DOM nodes\n */\nexport function qsa(selector = '', container = null) {\n  return Array.from((container || document).querySelectorAll(selector));\n}\n\n/**\n * Writes <style> tag and appends to document <head>\n * @param  {String} [style] string representation of css styles\n */\nexport function writeStyle(style) {\n  if (!style) return;\n  const element = document.createElement('style');\n  element.setAttribute('type', 'text/css');\n  element.appendChild(document.createTextNode(style));\n  document.head.appendChild(element);\n}\n\n/**\n * Returns the first parent that matches selector, exiting if limit or document is reached\n * @param  {String} selector target css selector, generally an id or class name\n * @param  {HTMLElement} el HTML Element to begin traversing\n * @param  {String} limit limit css selector\n * @return {HTMLElement|Null} the target element or null\n */\nexport function findParent(selector, el, limit) {\n  const isElementNode = el.nodeType === 1;\n  const limitReached = el === limit;\n\n  if (isElementNode && el.matches(selector)) return el;\n\n  return (!limitReached && el.parentNode) ? findParent(selector, el.parentNode) : null;\n}\n\n/**\n * Returns the first sibling that matches selector\n * @param  {String} selector target css selector, generally an id or class name\n * @param  {HTMLElement} el HTML Element to begin traversing\n * @return {HTMLElement|Null} the target element or null\n */\nexport function findSibling(selector, el) {\n  if (el.matches(selector)) return el;\n  return el.previousSibling ? findSibling(selector, el.previousSibling) : null;\n}\n\nconst hasNodeType = (node) => node != null && Number.isInteger(node.nodeType);\nexport const isNode = (node) => hasNodeType(node) && node.nodeType === 1;\nexport const isTextNode = (node) => hasNodeType(node) && node.nodeType === 3;\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/domHelpers.js","/**\n * Self explanatory.. check if Array or String has length\n * @param  {Any} x target\n * @return {Boolean}\n */\nexport default function hasLength(x) {\n  return Object.hasOwnProperty.call(x, 'length') && x.length > 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/hasLength.js","import { classnames } from '../constants';\nimport { toastStyle } from '../styles';\nimport { writeStyle } from './domHelpers';\n\n/**\n * Renders a notification toast element, writes styles to document head, returns api\n * @return [{ el: HTMLElement, update: Function, show: Function, hide: Function }] api for controlling toast\n */\nexport default function renderToast() {\n  writeStyle(toastStyle);\n  const pre = document.createElement('pre');\n\n  Object.assign(pre, {\n    className: classnames.TOAST,\n    textContent: 'jisho2json loaded',\n  });\n\n  const el = document.body.appendChild(pre);\n  let pendingFade;\n\n  function update(html) {\n    el.innerText = html;\n  }\n\n  function show() {\n    el.classList.toggle(classnames.VISIBLE, true);\n    clearTimeout(pendingFade);\n  }\n\n  function hide(delay = 0) {\n    pendingFade = setTimeout(() => {\n      el.classList.toggle(classnames.VISIBLE, false);\n    }, delay);\n  }\n\n  return {\n    el,\n    update,\n    show,\n    hide,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/renderToast.js","const TRIPLE_PRIME = {\n  regex: /'''/g,\n  replacement: '\\u2034', //\n};\nconst START_DOUBLE = {\n  regex: /(\\W|^)\"(\\S)/g,\n  replacement: '$1\\u201c$2', // “\n};\nconst END_DOUBLE = {\n  regex: /(\\u201c[^\"]*)\"([^\"]*$|[^\\u201c\"]*\\u201c)/g,\n  replacement: '$1\\u201d$2', // ”\n};\nconst FINAL_DOUBLE = {\n  regex: /([^0-9])\"/g,\n  replacement: '$1\\u201d', // ”\n};\nconst DOUBLE_PRIME = {\n  regex: /''/g,\n  replacement: '\\u2033', // ″\n};\nconst START_SINGLE = {\n  regex: /(\\W|^)'(\\S)/g,\n  replacement: '$1\\u2018$2', // ‘\n};\nconst POSSESSIVE_SINGLE = {\n  regex: /([a-z])'([a-z])/ig,\n  replacement: '$1\\u2019$2', // ’\n};\nconst END_SINGLE = {\n  regex: /((\\u2018[^']*)|[a-z])'([^0-9]|$)/ig,\n  replacement: '$1\\u2019$3', // ’\n};\nconst YEAR_ABBREVIATION = {\n  regex: /(\\u2018)([0-9]{2}[^\\u2019]*)(\\u2018([^0-9]|$)|$|\\u2019[a-z])/ig,\n  replacement: '\\u2019$2$3', // ’\n};\nconst BACKWARDS_APOSTROPHE = {\n  regex: /(\\B|^)\\u2018(?=([^\\u2019]*\\u2019\\b)*([^\\u2019\\u2018]*\\W[\\u2019\\u2018]\\b|[^\\u2019\\u2018]*$))/ig,\n  replacement: '$1\\u2019', // ’\n};\nconst SINGLE_PRIME = {\n  regex: /'/g,\n  replacement: '\\u2032', // ′\n};\n\nconst PROCESSING_ORDER = [\n  TRIPLE_PRIME,\n  START_DOUBLE,\n  END_DOUBLE,\n  FINAL_DOUBLE,\n  DOUBLE_PRIME,\n  START_SINGLE,\n  POSSESSIVE_SINGLE,\n  END_SINGLE,\n  YEAR_ABBREVIATION,\n  BACKWARDS_APOSTROPHE,\n  SINGLE_PRIME,\n];\n\nexport default function smartQuotes(input = '') {\n  return PROCESSING_ORDER.reduce((output, { regex, replacement }) => output.replace(regex, replacement), input);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/smartQuotes.js","/* eslint-disable no-console */\nimport { ready, qs, qsa, writeStyle, findParent, findSibling, isNode, isTextNode } from './util/domHelpers';\nimport { jishoStyle } from './styles';\nimport smartQuotes from './util/smartQuotes';\nimport hasLength from './util/hasLength';\nimport renderToast from './util/renderToast';\nimport { keycodes, classnames } from './constants';\n\n// TODO: put in constants when dev done\nconst selectors = {\n  TOAST: `.${classnames.TOAST}`,\n  ENTRIES: '#primary',\n  ENTRY: `.${classnames.ENTRY}`,\n  MEANINGS: '.meanings-wrapper',\n  TAGS: '.meaning-tags',\n  MEANING: '.meaning-wrapper',\n  MEANING_COUNTER: '.meaning-definition-section_divider',\n  MEANING_TEXT: '.meaning-meaning',\n  MEANING_NOTE: '.supplemental_info .sense-tag',\n  MEANING_SENTENCE: '.sentence ul',\n  SENTENCE_EN: '.english',\n  SENTENCE_JA_MORPHEMES: 'li > span:not(.english):not(.furigana)',\n  READING_CHARACTER: '.text',\n  READING_KANA: '.f-dropdown li:nth-of-type(2)', // only safe place for unsplit/whole kana\n  WORD_TAGS: '.concept_light-tag',\n};\n\nconst ifKeyDo = (key, callback) => ({ keyCode }) => {\n  if (keyCode === key) callback();\n};\n\n// blastoff!\nready(init);\n\nfunction init() {\n  writeStyle(jishoStyle);\n  const toaster = renderToast();\n  console.info('jisho2json loaded');\n\n  const onEntryClick = ({ target }) => {\n    // click target could be a child of entry, walk up dom tree until parent \"limit\" looking for entry\n    const limit = qs(selectors.ENTRIES);\n    const jishoEntry = findParent(selectors.ENTRY, target, limit);\n\n    if (jishoEntry) {\n      const result = buildEntries(jishoEntry);\n      // voodoo magic in order to copy to keyboard via background page\n      chrome.extension.sendMessage({ text: result }); // eslint-disable-line no-undef\n\n      // notify copied data\n      console.info('Copied:\\n', result);\n      toaster.update(result);\n      toaster.show();\n    }\n  };\n\n  toaster.el.addEventListener('click', toaster.hide);\n  document.body.addEventListener('keyup', ifKeyDo(keycodes.ESC, toaster.hide));\n  document.body.addEventListener('click', onEntryClick);\n}\n\nfunction buildEntries(container) {\n  const entries = qsa(selectors.MEANING, container)\n    .map((element) => buildEntry(container, element))\n    .filter((entry) => entry != null);\n\n  /*\n    TODO: need to allow user to choose to combine multiple meanings into a single meaning (perhaps very similar)\n    TODO: need to allow user to add alternate readings to a meaning (like 伸びる & 延びる)\n  */\n  const otherForms = qsa(selectors.TAGS)\n    .filter((tag) => tag.innerText.includes('other forms'))\n    .shift();\n  const otherFormsText = otherForms.nextSibling;\n  const synonyms = otherFormsText ? parseSynonyms(otherForms) : null;\n  console.log(synonyms);\n  return JSON.stringify(entries, null, 2);\n}\n\nfunction buildEntry(container, element) {\n  const counterNode = qs(selectors.MEANING_COUNTER, element);\n  const tagsNode = findSibling(selectors.TAGS, element);\n  const definitionNode = qs(selectors.MEANING_TEXT, element);\n  const noteNodes = qsa(selectors.MEANING_NOTE, element);\n\n  const counter = parseInt(getCleanText(counterNode), 10);\n  const isMainDefinition = Number.isInteger(counter);\n\n  if (!isMainDefinition) {\n    return null;\n  }\n\n  return {\n    counter,\n    tags: getCleanText(tagsNode).split(', '),\n    notes: parseNotes(noteNodes),\n    meaning: getCleanText(definitionNode).split('; '),\n    reading: buildReading(container, element),\n  };\n}\n\nfunction parseNotes(elements) {\n  // TODO: only allow/keep certain notes?\n  // TODO: combine \"other forms\" that aren't \"obsolete\" into synonyms\n  return elements.map(getCleanText).filter(hasLength);\n}\n\nfunction buildReading(container, element) {\n  const character = getCleanText(qs(selectors.READING_CHARACTER, container));\n  const kana = getCleanText(qs(selectors.READING_KANA, container));\n  const sentenceEn = getCleanText(qs(selectors.SENTENCE_EN, element)) || '';\n  const sentenceJa = qsa(selectors.SENTENCE_JA_MORPHEMES, element).map(getCleanText).join('');\n\n  return {\n    character,\n    kana: parseKana(kana) || character, // sometimes character entry was hiragana and there is no 'kana'\n    sentenceEn,\n    sentenceJa,\n    jlpt: getWordTag(container, 'jlpt'),\n    common: getWordTag(container, 'common'),\n  };\n}\n\nfunction parseKana(kana) {\n  const re = /(?!\\b)\\W+$/; // last word in \"Sentence search for かな\"\n  const [kanaText] = (kana.match(re) || []);\n  return kanaText;\n}\n\nfunction getWordTag(element, word) {\n  const result = qsa(selectors.WORD_TAGS, element)\n    .filter((el) => el.innerText.includes(word))\n    .shift();\n  return (isNode(result) && result.innerText) || '';\n}\n\nfunction parseSynonyms(text) {\n  // \"八 【や】、８ 【はち】、８ 【や】、捌 【はち】、捌 【や】\"\n  const units = text.split(/、|、 /g);\n  const result = units.map((x) => x.match(/(.*)(【.*】)/g));\n  return result;\n}\n\n/**\n * Get text from node and transform quotes\n * @param  {String|HTMLElement|Text} input string | dom element | text node\n * @return {String} text\n */\nfunction getCleanText(input) {\n  let text = input;\n  if (isNode(input)) text = input.innerText;\n  if (isTextNode(input)) text = input.textContent;\n  if (input == null || typeof text !== 'string') return '';\n\n  return smartQuotes(text.trim());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}